# flutter_ferry_aot_stress_test

Stress test for comparing the cost of running TFA on files generated by
`ferry_generator`.

Use `tool/benchmark.sh <num-copies>` to run the benchmark.

You need to specify the path to Dart SDK checkout by setting `DART_SDK_SRC_PATH`.

Here is an example output:

```console
$ export DART_SDK_SRC_PATH=$HOME/src/dart/sdk

$ tool/benchmark.sh 1
Generated 232 bytes across 10 files

Running gen_kernel.exe (AOT)

real    0m1.655s
user    0m1.695s
sys     0m0.283s

$ tool/benchmark.sh 10
Generated 1972 bytes across 73 files

Running gen_kernel.exe (AOT)

real    0m3.994s
user    0m4.385s
sys     0m0.340s

$ tool/benchmark.sh 50
Generated 9740 bytes across 353 files

Running gen_kernel.exe (AOT)

real    0m38.818s
user    0m43.418s
sys     0m1.286s

$ tool/benchmark.sh 100
Generated 19440 bytes across 703 files

Running gen_kernel.exe (AOT)

real    2m56.492s
user    3m11.781s
sys     0m4.003s
```